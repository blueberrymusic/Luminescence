<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Andrew's Digital Loom Help</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="help for Andrew's digital loom.">
    <link rel="canonical" href="http://cs231n.github.io/classification/">
	<script type="text/javascript" async
		src="https://cdn.mathjax.org/mathjax/latest/MathJax.js">
	</script>


    <!-- Custom CSS -->
    <link rel="stylesheet" href="help.css">

    <!-- Google fonts -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>

    <!-- Google tracking -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46895817-2', 'auto');
      ga('send', 'pageview');

    </script>
    
</head>


    <body>

    <header class="site-header">

  <div class="wrap title-wrap">
    <a class="site-title" href="/">Help for Andrew's Digital Loom</a>
  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1></h1>
  </header>

  <article class="post-content">
<p>
This is a quick-start (or quick-restart) guide to my online
<a href="http://www.TK">Digital Loom</a>.
</p>

<p>
The Digital Loom is a simplified and abstracted version
of a real loom used for weaving cloth.
You can set up the loom using patterns published in weaving
books that are over 100 years old,
or you can cook up crazy new designs of your own.
</p>

<p>
In this document I'm going to take things very fast.
If you want more information on looms and weaving,
how to read a draft, and how to use my pattern language,
you can find much more detailed descriptions in
two places.  
First, you can read the original articles
where I described this project by going to the page with
<a href="http://www.glassner.com/computer-graphics/cga-columns/" target="_blank"">all of my CG&A columns</a>,
and scrolling down to the three entries titled <em>Digital Weaving Part 1, 2,</em> and <em>3</em>.
(while you're there, you can also check out
<a href="http://www.glassner.com" target="_blank">other stuff I do</a>).
Or you can read collected and revised versions of those columns in my book
<a href="http://www.glassner.com/portfolio/morphs-mallards-and-montages/" target="_blank">Morphs,
Mallards, and Montages: Computer-Aided Imagination</a>,
which you can buy online or find in your local library.
</p>

<h2>Super-Quick Start</h2>
<p>
Load up some of the presets to see what the loom can do.
If you want to play with the results,
don't click on the grids on the right side of the screen:
they're output only and don't respond to any interaction.
Instead, type pattern expressions into the boxes at the
far left, and press the arrow to the right of each box
to update the loom and re-weave the fabric.
I discuss the pattern language below,
but for now, just try making small changes to the numbers
and see what happens
(also for now, keep all of your numbers in the range 0 to 7).

<ul>
<li><strong>TK This list is all just placeholders right now TK</strong></li>
<li><a href="#overview">Overview of The Digital Loom</a></li>
<li><a href="#howtoread">How To Read A Weaving Diagram</a></li>
<li><a href="#awlIntro">Introduction to AWL</a></li>
<li><a href="#awl">AWL</a></li>
<li><a href="#using">How To Use The Digital Loom</a></li>
<li><a href="#colors">Naming Colors</a>
<li><a href="#faq">FAQ</a></li>
<li><a href="#reading">Further Reading</a></li>
</ul>

<p><a name='overview'></a></p>
<h2>Overview of The Digital Loom</h2>

<p>
To create a piece of woven fabric, you have to set up the loom with
weaving instructions.
Visually, these instructions look like three black-and-white checkerboards.
When you're using colored yarns for your fabric,
there is also a row and a column of colors.
These five elements are called a <em>draft</em>.
On our simple digital loom,
once you've filled in these grids in your desired way,
the fabric immediately weaves itself and you see the results.
</p>
<p>
So there are really only two things to learn about if you 
want to create your own designs:
how the draft turns into a fabric,
and how to set up the draft on the digital loom.
We'll take these in turn below.
</p>

<h2>How A Draft Becomes Fabric</h2>
<p>
On the digital loom, 
the draft sits on the right side of the screen,
as shown in Figure 1.
The draft is made up of six regions.
I'll use very simple terminology here to keep things
brief; real looms are complex machines and there's a
lot more to them than I'll go into here!
</p>

<div class="fig figcenter fighighlight">
  <img src="images/figure.jpg">
  <div class="figcaption">
TK TK An overview of the Digital Loom.
</div>
</div>

<ul>
<li>The <strong>Warp</strong> is the checkerboard directly
below the fabric. Each column of the warp is colored in white
except for exactly one black square.</li>
<li>The <strong>Warp Colors</strong> is a single row directly
beneath the warp. It identifies the color of the yarn that
rises vertically up into each column of the fabric.</li>
<li>The <strong>Weft</strong> is the checkerboard directly
to the right of the fabric. Each row of the weft is colored in white
except for exactly one black square.</li>
<li>The <strong>Weft Colors</strong> is a single column directly
right of the weft. It identifies the color of the yarn that
travels horizontally left into each row of the fabric.</li>
<li>The <strong>Tie-up</strong> is a rectangular grid
to the right of the warp and below the weft. It can hold
an arbitrary arrangement of white and black cells.</li>
<li>The <strong>Fabric</strong> is the checkerboard in the
upper left of the draft region. Each cell in the checkerboard
has a single color. This is either the warp color directly
below it, or the weft color directly to its right. The
warp, weft, and tie-up work together to determine which
of these two colors goes into that cell of the fabric.</li>
</ul>

<p>
The job of the loom is to determine what color to place
in each cell of the fabric's checkerboard.
The process is straightforward.
For any given (x,y) cell in the fabric,
we ask which strand of yarn is on top: the one
from the warp below, or the weft to the right?
The upper strand gives its color to the cell.
</p>
<p>
We answer that question in 3 steps:
</p>
<ol>
<li>Look directly to the right of the fabric
cell to find the corresponding row of the weft.
There will be exactly one black cell in that row.
<li>Look directly below the fabric
cell to find the corresponding column of the warp.
There will be exactly one black cell in that column.
<li>From the black cell in the weft's row, imagine
a line directly down to the tie-up.
From the black cell in the warp's column,
imagine a line directly right to the tie-up.
These two lines meet at a cell in the tie-up.
If that cell is black, the warp strand is on top,
otherwise the weft is on top.
</ol>

<p>
That 3-step process determines the color
of every cell in the fabric.
It might feel somewhat mysterious to you
just how these three things interact.
Welcome to the human race!
Although this process is very simple,
the way the warp, weft, and tie-up work
together to form a fabric can get very
complicated and subtle.
particularly when their patterns become
complicated.
A big part of learning to design fabrics is
to develop an intuition for drafts,
and how to assign the black squares in a 
way that leads to the fabric design you
have in mind.
</p>

<h2>The Role of Patterns</h2>

<p>
Each of the three black-and-white grids
(the warp, weft, and tie-up)
needs to be set up correctly.
That is, one cell in each row of the 
weft must be marked in black,
as much one cell in each column of the
weft. 
The tie-up can have no black cells,
all black cells,
or any mixture you like.
</p>
<p>
When talking about a draft,
We want to talk about various calumns
and rows in the grids,
so it's important that we know in what
order to count.
The scheme is a little unusual,
because each of the four grids gets a
different corner marked as the origin.
You're probably used to the origin of
a grid being in the upper-left or lower-right.
But using a different origin for each grid
makes things easier to think about.
</p>
<p>
Consider Figure 3.
Notice the point <strong>A</strong>
where all four grids meet.
Think of this as the overall "origin" for
the draft.
Each grid's own origin is at the corner
closest to A.
Then to locate a cell
we count in the usual way,
horizontally and then vertically
from the origin.
</p>

<div class="fig figcenter fighighlight">
  <img src="images/figure.jpg">
  <div class="figcaption">
TK TK The origin of each grid is closest to point A.
</div>
</div>

<ul>
<li><strong>The Fabric:</strong> The origin
is in the bottom right.
So a cell (x,y) is found by counting x steps
to the left and y cells up from that corner.</li>
<li><strong>The Warp:</strong> The origin
is in the upper right.
So a cell (x,y) is found by counting x steps
to the left and y cells down from that corner.</li>
<li><strong>The Weft:</strong> The origin
is in the bottom left.
So a cell (x,y) is found by counting x steps
to the right and y cells up from that corner.</li>
<li><strong>The Tie-up:</strong> The origin
is in the upper left.
So a cell (x,y) is found by counting x steps
to the right and y cells down from that corner.</li>
</ul>

<p>
Now that we can talk about the coordinates,
let's look at the simple draft in Figure 4.
</p>


<div class="fig figcenter fighighlight">
  <img src="images/figure.jpg">
  <div class="figcaption">
TK TK A simple draft.
</div>
</div>

<p>
Let's start with the warp.
Remember, a cell at (x,y)
is x units to the left, 
and y units below,
the upper-right corner.
Each column of the warp must
be entirely white except for
a single black cell.
So we can describe that column
merely with the y value of 
that black cell.
In Figure 4,
counting to the left and down,
we get the pattern 0 1 3 2 3.
You can see that this pattern 
keeps repeating as it goes left.
</p>
<p>
Similarly,
we can describe the weft by 
identifying the horizontal location
of each black cell.
Remember that we count the weft
from the lower left,
going right and then up.
The weft has a pattern 1 2 0 3 
which repeats over and over.
</p>
<p>
The tie-up has any mix of
black and white cells.
Remembering that we count the tie-up
left to right and top down,
we can write the contents as 
1 0 0 1 1,
which again repeats over and over
as we make our way down through
the checkerboard.
</p>
<p>
Finally, we can look at the colors.
The warp color is a simple pattern:
it's just green the whole way through.
The weft pattern has three colors
arranged red, yellow, blue, yellow,
and that sequence of 4 keeps repeating.
</p>
<p>
As long as our draft is small and the
patterns are short,
then writing things down like this is just
fine. 
We could summarize the draft this way,
where it's understood that each little
pattern is repeated over and over:
</p>

<ul>
<li>Warp: 0 1 3 2 3</li>
<li>Weft: 1 2 0 3</li>
<li>Tie-Up: 1 0 0 1 1  </li>
<li>Warp Colors: green </li>
<li>Weft Colors: red yellow blue yellow </li>
</ul>

<p>
This works great for a simple draft.
But suppose that the warp pattern,
instead of being just 5 numbers from 0 to 3,
was 200 numbers ranging from 0 to 15?
And the weft was a different pattern but
of the same size?
Just writing it down would be awful.
Somehow transcribing that into the loom
would be a boring, tedious, and error-prone task.
This is one reason why most traditional drafts
have not used such huge patterns.
</p>

<p>
But huge patterns can produce wonderful,
complex, rich fabrics.
And the computer can handle all the tedious
tasks for us perfectly and without complaint.
Still, writing down all those numbers would
be a terrible chore, and then adjusting them
to tweak the resulting fabric would be just
as awful.
So instead, the Digital Loom lets you create
rich and interesting patterns of numbers
(and colors) using a <em>weaving language</em>.
</em>


<h2>Andrew's Weaving Language</h2>

<p>
As we saw, 
when drafts get large,
tweaking them can become complicated and
time-consuming.
You might think it would be best to just click
in the cells of a  draft to change their color.
But when your patterns become big,
that quickly becomes tedious.
</p>
<p>
In the Digital Loom, we take a
different approach.
Instead of clicking on cells,
you write little expressions in a custom
pattern-making language designed explicitly
for creating patterns that help you make
interesting fabrics.
These expressions are usually short,
but they can result in patterns that are
hundreds of numbers long,
containing lots of complicated sub-patterns
that interact to make a visually rich fabric.
</p>
<p>
Each of the five elements in the draft has
its own little box for typing in a pattern.
You type (or edit) an expression in one of
the boxes,
then you press the arrow to its right.
That immediately updates the box to the
right of the arrow (showing you the pattern
your expression turns into), 
then the pattern is used to fill in the
corresponding part of the draft,
and then the fabric is immediately re-woven.
This way you can easily and quickly tweak
and tune your patterns,
and experiment with whole new ideas,
very quickly and easily.
</p>
<p>
The way it works is that you type or paste
or edit the plain text in one of the leftmost
text boxes.
In AWL you write an expression as a long list
of words, where each word is separated from the
others by spaces (here, numbers count as "words").
So you type in some stuff and then hit the arrow.
</p>
<p>
AWL is a <em>stack-based</em> language.
If we want to add 5 and 3,
we can write "5+3".
In a stack-based language,
we write "5 3 +".
The idea is that we take the 5 and
<em>push</em> it on top of a stack
of numbers (the stack starts out empty),
then we push the 3 on top of that,
and then the + operator 
</em>pops</em> the 3 off the top,
then it pops the 5,
adds them to get 8,
and pushes 8 back onto the top of
of this now-empty stack.
When we're done with an expression,
the stack has one element in it which
holds our result.
Note that sometimes order matters:
"5 10 /" results in 0.5,
while "10 5 /" results in 2.
There is much, much more on stack languages
available on the web and in my papers and
book chapter mentioned at the start of this document.
</p>
<p>
AWL is just a little different than the
calculator example,
because instead of thinking of a single number
as our fundamental object,
AWL thinks of <em>lists</em> as the basic object.
In AWL, lists can be made up of numbers or colors.
For now, we'll stick just to numbers.
</p>
<p>
A list is any list of numbers separated by spaces.
<code>3 4 5</code> is a list.
<code>4</code> is also a list, though a very short one.
As AWL reads each number from your input area,
it appends it to the end of the growing list on the
top of the stack.
This means that if you want to start a new list,
or even just put one number on the stack,
you have to tell AWL that you're done appending
to the current top of the stack.
You can do this easily by saying <code>push</code>.
If you have a growing list on the stack when you 
call </code>push</code>,
AWL pushes a new, blank list on top of the stack.
</p>
<p>
For example,
suppose you want to repeat the sequence <code>5 6 7</code>
a total of <code>3</code> times.
You find the command <code>repeat</code>
which takes two arguments:
first, a list, and second, a number of times to repeat that list.
So the stack should have at least two things on it when you call 
<code>repeat</code>:
the list you want to repeat,
and on top of that,
the number of repeats.
In our example, then, you'd write <code>5 6 7 push 3 repeat</code>,
and you'd get back
<code>5 6 7 5 6 7 5 6 7</code>.
</p>
<p>
Note that this would fail if you left out the <code>push</code>,
writing only <code>5 6 7 3 repeat</code>.
Remember that <code>repeat</code> wants to pop two things
off the stack, and if you wrote this most recent string
you'd just have the list <code>5 6 7 3</code>.
You might argue that <code>repeat</code> should be smart enough
to be able to figure this out and use the last element in
the list as the repeat count,
but it turns out that this is just asking for trouble.
Allowing for this sort of thing just invites a world of errors
and mistakes.
</p>
<p>
So just get in the habit of separating the end of one
list and the start of another 
with <code>push</code>.
</p>
<p>
Like many AWL commands, both 
<code>repeat</code>
and
<code>push</code>
have shortcuts to make typing easier.
<code>repeat</code>
may be written simply as
<code>*</code>
and
<code>push</code>
is abbreviated
<code>/</code>.
So our most recent example could be written
<code>5 6 7 / 3 *</code>.
You can use the full names any time you want to,
of course,
but I suggest getting used to the shortcuts.
You'll get used to seeing idioms that you'll
be using over and over,
and the shorter expression makes it easier to
take it all in at a glance.
</p>

<p>
I mentioned before that AWL supports lists of colors.
These are for the boxes where you create inputs for the
warp and weft colors.
You can refer to a color simply by giving its name,
hex value, or rgb values
(see the section on colors later).
When you're building up a list, AWL treats the colors
just like numbers.
Note, though, that you can't use a color when AWL
is expecting a number.
For example, if you want to repeat the list
<code>green orange</code> three times,
you need to make the second argument the number <code>3</code>,
so it would appear <code>green orange / 3 *</code>.
Trying to repeat the list <code>purple</code> times
wouldn't make any sense, and you'd get an error.
Generally speaking, you can use a color anywhere except
where AWL is explicitly expecting a number.
Like the other lists,
each list of colors gets automatically repeated as many
times as necessary to create your fabric.
</p>

<p>
So you'll write expressions that
produce patterns of numbers for the warp and weft,
patterns of colors for the warp and weft colors,
and patterns of 0's and 1's for the tie-up.
The computer will use your patterns to fill in
the corresponding part of the draft,
and then keep repeating it as needed to make
the entire fabric.
</p>

<p>
AWL has a bit more than 40 commands. I won't run through
them all here.
You can find a discussion of each one in Part 2 of my CG&A
Digital Weaving series,
which again you can read for free by going to my
list of
<a href="http://www.glassner.com/computer-graphics/cga-columns/" target="_blank"">my CG&A columns</a>,
or read in 
<a href="http://www.glassner.com/portfolio/morphs-mallards-and-montages/" target="_blank">my book</a>
that collects those columns.
</p>
<p>
While re-writing AWL for this website, I made a few changes
from the version in those references.
Below is a summary of the AWL commands available to you online,
and below that is a short summary of what's different about
what's here from what was in the columns.
</p>
<p>
In the following,
A and B refer to lists.
The letters c and d refer to single numbers.
Remember that each argument,
whether a list or a number,
must be in its own element on the stack.
A0 and AL refer to the first
and last elements of list A (and B0 and BL do the
same for list B).
Ai refers to the i'th element of A,
and Bi is the same for B.

<h2>AWL Summary</h2>

<table id="awlsummary">
<tr>
	<th>Command</th>
	<th>Shortcut</th>
	<th>Norm</th>
	<th>Summary</th>
</tr>
<tr>
	<td><b>A</b> binary0</td>
	<td> </td>
	<td> </td>
	<td>Treat <b>A</b> as alternating runs of 0s and 1s</td>
</tr>
<tr class="alt">
	<td><b>A</b> binary1</td>
	<td> </td>
	<td> </td>
	<td>Treat <b>A</b> as alternating runs of 1s and 0s</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> block</td>
	<td>#</td>
	<td>Y</td>
	<td>Each <b>A</b>i is repeated <b>B</b>i times</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> blockpal</td>
	<td>#p</td>
	<td>Y</td>
	<td>block with internal palindrome</td>
</tr>
<tr>
	<td>clear</td>
	<td> </td>
	<td> </td>
	<td>Erase the stack</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> concat</td>
	<td>,</td>
	<td> </td>
	<td>Concatenate the top two stack elements</td>
</tr>
<tr>
	<td><em>c</em> <em>d</em> domain</td>
	<td> </td>
	<td> </td>
	<td>Set the domain to [<em>c</em>, <em>d</em>]</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> down</td>
	<td>&gt;</td>
	<td> </td>
	<td><b>A</b>, descending run from <b>A</b>L to <b>B</b>0, <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> <em>c</em> downloop</td>
	<td>&gt;l</td>
	<td> </td>
	<td>Like down, but includes <em>c</em> runs as well</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> downup</td>
	<td>&gt;u</td>
	<td>Y</td>
	<td>Alternating down and up runs. <strong>A</strong> may be 1 longer than <strong>B</strong
</tr>
<tr>
	<td><b>A</b> <b>B</b> <em>c</em> downuploop</td>
	<td>&gt;ul</td>
	<td>Y</td>
	<td>Like downup but include <em>c</em> runs as well</td>
</tr>
<tr class="alt">
	<td><b>A</b> dup</td>
	<td> </td>
	<td> </td>
	<td>Pop the top of the stack and push it back twice</td>
</tr>
<tr>
	<td><strong>A</strong> <em>d</em> extend</td>
	<td>+</td>
	<td> </td>
	<td>repeat or clip <b>A</b> to <em>d</em> elements</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> growblock</td>
	<td>=</td>
	<td>Y</td>
	<td>Interleave <b>A</b> with growing palindromes of <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> iblock</td>
	<td>i#</td>
	<td>Y</td>
	<td>Like block but the inputs are interleaved in <b>A</b></td>
</tr>
<tr class="alt">
	<td><b>A</b> iblockpal</td>
	<td>i#p</td>
	<td>Y</td>
	<td>iblock with internal palindrome</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> interleave</td>
	<td>%</td>
	<td>Y</td>
	<td>Take alternating elements of <b>A</b> and <b>B</b></td>
</tr>
<tr class="alt">
	<td><b>A</b> <em>d</em> nth</td>
	<td> </td>
	<td> </td>
	<td>take ever <em>d</em>'th element of <b>A</b></td>
</tr>
<tr>
	<td><b>A</b> palindrome</td>
	<td>|</td>
	<td> </td>
	<td><b>A</b> followed by its near reversal</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> pbox</td>
	<td> </td>
	<td> </td>
	<td>Shortcut for <b> A B A </b> veclen extend permute</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> permute</td>
	<td> </td>
	<td> </td>
	<td>Use elements of <b>B</b> to index <b>A</b></td>
</tr>
<tr class="alt">
	<td><b>A</b> pop</td>
	<td> </td>
	<td> </td>
	<td>Discard top of the stack</td>
</tr>
<tr>
	<td>push</td>
	<td>/</td>
	<td> </td>
	<td>Consider all since last command a single list</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> ramp</td>
	<td>-</td>
	<td> </td>
	<td>Go up or down as needed to stay in domain</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> <em>c</em> ramploop</td>
	<td>-l</td>
	<td> </td>
	<td>Like ramp but include <em>c</em> runs as well</td>
</tr>
<tr class="alt">
	<td><b>A</b> <em>d</em> repeat</td>
	<td>*</td>
	<td> </td>
	<td>repeat <b>A</b> a total of <em>d</em> times</td>
</tr>
<tr>
	<td><strong>A</strong> reverse</td>
	<td>@</td>
	<td> </td>
	<td>reverse the elements of <strong>A</strong></td>
</tr>
<tr class="alt">
	<td><b>A</b> <em>d</em> rotatel</td>
	<td><<</td>
	<td> </td>
	<td>rotate <b>A</b> left by <em>d</em> steps</td>
</tr>
<tr>
	<td><b>A</b> <em>d</em> rotater</td>
	<td>>></td>
	<td> </td>
	<td>rotate <b>A</b> right by <em>d</em> steps</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> swap</td>
	<td> </td>
	<td> </td>
	<td>Exchange the top two stack elements</td>
</tr>
<tr>
	<td><b>A</b> tartan</td>
	<td> </td>
	<td>Y</td>
	<td>Like iblock but repeats are half length</td>
</tr>
<tr class="alt">
	<td><b>A</b> tartanpal</td>
	<td> </td>
	<td>Y</td>
	<td>tartan with internal palindrome</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> template</td>
	<td>:</td>
	<td> </td>
	<td>Create a subarticulation using <b>B</b> as a template</td>
</tr>
<tr class="alt">
	<td><b>A</b> <em>c</em> <em>d</em> twilll</td>
	<td>t&lt;&lt;</td>
	<td> </td>
	<td>Rotate left by <em>c</em> steps, <em>d</em> times</td>
</tr>
<tr>
	<td><b>A</b> <em>c</em> <em>d</em> twillr</td>
	<td>t&gt;&gt;</td>
	<td> </td>
	<td>Rotate right by <em>c</em> steps, <em>d</em> times</td>
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> up</td>
	<td>&lt;</td>
	<td> </td>
	<td><b>A</b>, ascending run from <b>A</b>L to <b>B</b>0, <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> updown</td>
	<td>&lt;d</td>
	<td>Y</td>
	<td>Alternating up and down runs. <strong>A</strong> may be 1 longer than <strong>B</strong
</tr>
<tr class="alt">
	<td><b>A</b> <b>B</b> <em>c</em> updownloop</td>
	<td>&lt;dl</td>
	<td> </td>
	<td>Like updown but include <em>c</em> runs as well</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> <em>c</em> uploop</td>
	<td>&lt;l</td>
	<td> </td>
	<td>Like up, but includes <em>c</em> runs as well</td>
</tr>
<tr class="alt">
	<td>veclen</td>
	<td> </td>
	<td> </td>
	<td>Push the length of the list at the top of the stack</td>
</tr>
<tr>
	<td>vmax</td>
	<td> </td>
	<td> </td>
	<td>Push largest element in list at top of stack</td>
</tr>
<tr class="alt">
	<td>vmin</td>
	<td> </td>
	<td> </td>
	<td>Push smallest element in list at top of stack</td>
</tr>
</table>


<h2>Notes on AWL</h2>

<p>
Here are the key differences between what's in 
<a href="http://www.glassner.com/computer-graphics/cga-columns/" target="_blank"">my CG&A columns</a>
and
<a href="http://www.glassner.com/portfolio/morphs-mallards-and-montages/" target="_blank">my book</a>,
and what's implemented here.
</p>

<ul>
<li><strong>template:</strong> Templates are no longer automatically made relative to the
first number in the second list. So the values you add to each
number in your starting list are simply the numbers you provide.
For example, <code>3 4 : 1 2 3</code> will add the values <code>1 2 3</code>
to <code>3</code> and then to <code>4</code>, producing <code>4 5 6 5 6 7</code>.</li>
<li><strong>updown, updownloop, downup, downuploop:</strong> These four
commands normally reshape the two input lists so they have the same size.
Introduced to the online version, this resizing won't happen if
the first list can have 1 more element than the second one. This way
you can make nice repeating patterns of up and down ramps.
For example, <code>0 1 / 4 updown</code> has two elements in the first
list (<code>0 1</code>)and only one in the second (<code>7</code>).
These lists won't be resized, so the result goes up from <code>0</code>
to <code>4</code>, then back down to <code>1</code>,
giving you the nice up-down sequence <code>0 1 2 3 4 3 2 1</code>.
When this automatically repeats you'll get a nice triangle wave 
repeating forever (a perfect starting point for twills).</li>
<li><strong>twillr, twilll:</strong> These commands got a little 
confused. Here's how they work now.
<ol>
<li>
I implemented them backwards in the original code,
so they rotated in the directions opposite to their names.
That's fixed now (and the examples have been updated
to reflect that).</li>
<li>
Both commands take as input a list <code>A</code>
and two numbers
<code>c</code>
and 
<code>d</code>,
in that order.
The list gets repeated <code>d</code> times.
The first time it appears just as given.
The second time it's rotated right (or left) by <code>c</code>
steps.
The next time that most recent version gets rotated right
(or left) by another <code>c</code> steps, and so on.
So for example,
<code>0 1 2 3 / 1 / 4 twillr</code>
will produce the list
<code>0 1 2 3</code>,
then it gets rotated right once to produce
<code>3 0 1 2</code>,
then rotated again to make
<code>2 3 0 1</code>,
and then a fourth time to produce
<code>1 2 3 0</code>,
giving a final result of
<code>0 1 2 3 3 0 1 2 2 3 0 1 1 2 3 0</code>.
</li>
</ol>
</li>
</ul>

<p>
Here are some helpful hints to keep in mind.
</p>

<ul>
<li>Start simple, and add small bits of complexity one step at a time</li>
</li>The output window will always show you what's on top of the stack. Feel free
to ignore the fabric while you experiment with AWL commands and see what they turn into.</li>
<li>Remember to push between lists! This is an easy thing to forget.</li>
<li>Make sure to keep track of your domain. It starts at [0,7] for both warp and
weft, so if you change that, remember your change or set it back to [0,7].</li>
<li>Make sure you have the tie-up sizes set the way you like. The tie-up doesn't
automatically re-size to fit your warp or weft (that would make it much harder
to experiment with your drafts).</li>
<li>When in doubt, just type in your pattern explicitly;
not everything has to be a clever AWL construction.
For example, if you want the pattern <code>0 1 3 5 2</code>,
it's probably easiest to just type that directly into the text area
and move on.</li>
</ul>

<h2>A Worked Example</h2>

<p>
I find that I almost never draw out a draft
before typing it in.
Instead, I start with something simple and
then modify it, following my intution,
as it starts to develop into something interesting.
Here's an exmaple of that process.
</p>

<p>
A nice starting point is a simple twill.
We just put triangle waves in both the warp and weft,
and diagonal stripes in the tie-up.
I'll just pick a couple of constant colors for
both the warp and weft for now.
See Figure 4.
</p>
<ul>
<li><strong>Warp:</strong> <code>0 1 / 7 updown</code></li>
<li><strong>Weft:</strong> <code>0 1 / 7 updown</code></li>
<li><strong>Warp colors:</strong> <code>LightSeaGreen</code> </li>
<li><strong>Weft colors:</strong> <code>Navy </code></li>
<li><strong>Tie-up:</strong> <code>1 1 1 1 0 0 0 0 / 1 / 8 t>></code></li>
</ul>

<div class="fig figcenter fighighlight">
  <img src="images/figure.jpg">
  <div class="figcaption">
TK TK Making a draft, Step 1.
</div>
</div>

<strong>more steps go here TK TK TK TK TK</strong>

start with simple start twill
<code>0 1 / 7 updown </code>
<code>0 1 / 7 updown </code>
<code>DeepSkyBlue </code>
<code>PowderBlue </code>
<code>1 1 1 1 0 0 0 0 / 1 / 8 t<< </code>
try changing the tiup to 
<code>1 1 0 1 0 0 1 0 / 1 / 8 t<< </code>

<p><a name="faq"></a></p>
<h2>FAQ</h2>

<p><strong>How do I save and load my drafts?</strong></p>
<p>
To <strong>save</strong> a draft, enter the name you want to use in the text box to
the right of the Save button, and then press the Save button.
If a draft of that name already exists, you'll be propted to confirm
you want to over-write it.
The demos at the bottom are built-in and you can't over-write them,
but you can make new versions of your own with the same names.
</p>
<p>
To <strong>load</strong> a draft, just select it from the drop-down list.
</p>
<p>
To <strong>delete</strong> a draft, press the Delete button. It will attempt to delete
the draft named in the text box next to the Save button,
and confirm with you that you really want to delete it.
</p>
<p>
The drafts are not saved as little files, so you don't
need a file extension (like .txt) after their names.
</p>
<p><strong>How do I save my fabric image?</strong></p>
<p>
Right-click on fabric and you should get a pop-up menu. Choose "Save Image As..."
(or whatever is closest to that), and you should get your standard file save
dialog box, letting you put the image anywhere you want. It's saved in PNG
format for best quality; you can turn this into JPG or GIF or anything else
you like with any photo editing program.
</p>
<p><strong>How do I share my drafts?</strong></p>
<p>
Right now, it's a hassle (other questions here go into the reasons).
Until browsers catch up with their aspirations,
here's the best way to save a draft so you can share 
it with someone else.
Open a text editor and make a new, blank file.
Type the words "warp pattern:".
Now click in your browser,
copy the text in the warp pattern input box,
and paste that into the your file.
Still in the text file,
type "weft pattern:",
then click in the browser,
copy the text in the input box for the weft pattern,
and paste that into the text file.
Follow the same thing for the warp and weft colors,
and the tie-up.
At the bottom, type "Tie-up sizes" and type in the values
that you have the tie-up size set to (see the boxes directly
above the fabric).
If you want to save the fabric size,
give that a line in the text file as well.
Now you have a file with the AWL for your draft,
plus the tie-up and fabric sizes.
Save that file.
</p>
<p>
Since that's a normal text file, you can copy it or
back it up or share it or do whatever you like with it.
Unfortunately, 
the program can't read that file,
so to get the information back into the Digital Loom
you need to reverse the process.
Open the file in a text editor,
then one field at a time,
copy the text from the text file (just the AWL expressions,
not your labels - those are just there so you know which is which)
and paste that text into the text boxes.
Then set the tie-up sizes and fabric size if necessary.
Remember you need to press the arrow button to the right
of <em>each</em> input field to 
tell the Digital Loom to read the new AWL you just pasted in.
</p>
<p>
If you want to save the patterns produced by your AWL,
for example to use on a real loom,
you'd follow the same business about creating
a new text file,
and copying data out of the web page and pasting
it into the text file,
only you'd copy the <em>output</em> fields instead.
Those hold the pattern data that you'd then use to
set up a real, physical loom to weave your design.
</p>
<p><strong>Why is all this file stuff so awkward?</strong></p>
<p>
Actually, it's kind of remarkable that we can manage to save and recall anything at all.
The reasons are technical. If you're into that, read on.
If not, just know that someday things ought to get less weird,
but right now this is all we've got.
</p>
<p>
Browsers are very deliberately designed to be unable to talk to your local computer's
hard drive (this is to protect you, and it's one of the reasons the web has succeeded
the way it has). But there are a few little loopholes to that policy. For example, you
probably know about cookies: these are tiny files on your hard drive, written and read
by the browser, that save preferences and other information for web pages. That's an
example of the browser reading from, and writing to, your computer's hard drive.
The Digital Loom doesn't use cookies, but it uses the other two possible exceptions
(these are both perfectly safe: they're part of the offical, international standards 
that all browsers follow in order to work on the web).
</p>
<p>
The first one lets you save your fabric by right-clicking on it and saving it as a picture.
We manage that by telling the browser that the drawing we made is just a normal photograph 
that can be saved in that usual way.
</p>
<p>
The second trick is called LocalStorage, and that's where we store your drafts.
But this is a very constrained way to save things. Each URL (that is, each web page)
can save up to 5MB total, without exception (that's not enough for pictures!).
And each browser manages its own LocalStorage, so the drafts you save on Firefox,
say, will not be available in Chrome, and vice-versa. This is true for each type
of browser. The files are saved to your hard drive, so if you're using a friend's
computer, your saved files will not be there. Finally, these aren't really files at
all, so don't go looking for them on your disk. They're actually saved inside a
database managed by the browser (that's why we can't use this method to save files
you can share with other people (that's why we can't use this method to save files
you can share with other people)).
</p>
<p><strong>Can I save my draft in the WIF weaving-file format to share with other weavers, or use to set up a real loom?</strong></p>
<p>
Oh, how I wish the answer was "yes", but it's not. In fact, I have written all
the code to support reading and writing WIF files.
But that's useless now,
because browsers are forbidden from writing files to your
local file system. 
This means the browser can't write a WIF file to your disk.
There are a few ways to save files, but all the ones I know of have major drawbacks:
you can run a local server, but that's a technical task that most people are not prepared to do;
you can use a commercial remote server, but that means either you or I pay money to buy space;
or
you can use a free remote server, but all the ones I've looked into require a prohibitive amount
of time and work from me to support.
When browsers finally allow us to read and write to 
carefully blocked-off parts of your local file system,
as the current international spec calls upon them to do,
then I'll very happily change the draft saving and loading 
to use WIF files by defaultt.
</p>
<p><strong>Why am I getting a really weird error when my AWL looks fine?</strong></p>
<p>
A very frequent cause of weird errors is messing up the spacing rule.
Remember that each <em>word</em> in AWL must be surrounded by space.
That means each number and each command.
For example, the shortcut for <code>twillr</code> is <code>t>></code>,
all one word with no spaces.
And if you want to concatenate three lists together,
you'd write <code>, , ,</code> with a space between each comma.
Leaving out those spaces, or including extra ones where they don't belong,
is an easy mistake to make.
</p>
<p><strong>How do I debug my AWL?</strong></p>
<p>
If things are going wrong, I find it easiest to write down the whole
expression I'm working on, and then build it up again one step at a time.
Type in one new piece of stuff to build the pattern, hit the button,
and see what's on top of the stack. If that looks right, continue.
If it doesn't, tune up what you have there until it does.
</p>
<p><strong>You said there should be just one thing left on the stack at the end, but I have more. Is that a problem?</strong></p>
<p>
Not necessarily, if what's on top is the result you want. But usually that indicates a problem. A common cause of this comes from building up your expression in pieces, but then forgetting to concatenate them together into one big pattern when you're done. A lot of complicated expressions end with a bunch of commas (the concatenation shortcut) to glue together all the intermediate results sitting on the stack.
</p>
<p><strong>AWL isn't much of a language. Where are the variables, loops, procedures, etc.?</strong></p>
<p>
AWL isn't a general-purpose programming language, and it doesn't need all that stuff.
It's been designed for one thing only: to help you make cool patterns of numbers
and colors that are useful in weaving. You don't need variables, loops, and all that
stuff to do that.
If you find yourself wanting to use all of those tools to make your expressions,
your best bet is to fire up your favorite language and write programs in it.
The output should be either a big list of numbers or colors,
which you can just copy and paste into the appropriate input box.
Hit the arrow and it will simply copy over into the output box.
Or, if you're feeling fancy, you can use your program to write AWL expressions
that you copy and paste the same way.
</p>
<p><strong>Hey! You crashed my browser!</strong></p>
<p>Sorry! 
The truth is that there are a lot of ways that things can go
wrong when we turn your AWL into a pattern.
I've tried to catch all of them,
and to give you at least some information about where things
went wrong.
If something slipped past me and crashed your browser,
I'd love to fix it.
The catch is that I'd need the <em>exact</em> AWL expression you
were trying to translate at the time of the crash,
and that's probably gone because,
well,
the browser's crashed.
So if you can,
try to immediately re-load the page and recreate the problem.
Copy the text in your input box frequently each time you get
closer to the problem.
Then when it does crash,
you'll be able to send me email and simply paste the
offending AWL right into the body of the mail.
</p>

</article>
</div>
</div>
</div>



</html>
