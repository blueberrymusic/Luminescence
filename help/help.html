
<!DOCTYPE html>
<html>
<head>
	<title>Help for Andrew's Digital Loom</title>

<!-- jQuery must follow my style and precede Bootstrap -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Bootstrap stuff -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

<!-- make mobile-friendly: http://www.w3schools.com/bootstrap/bootstrap_get_started.asp
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- get awesome fonts for glyphs -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

<!-- Just for grins, use Ubuntu here and there -->
<link href="http://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="help.css">
</head>

<body>

	<div class="container">
		<div class="row">
			<div class="col-md-10 col-md-offset-1">

				<div class="page-header">
<h1>Andrew's Digital Loom Help </h1>

<p>
This is a quick-start guide to my online
<a href="http://www.TK">Digital Loom</a>.
</p>

<p>
The Digital Loom is a simplified and abstracted version
of a real loom used for weaving cloth.
You can set up the loom using patterns published in weaving
books that are over 100 years old,
or you can cook up exciting new designs of your own.
</p>

<p>
This document moves quickly.
For more information on everything, 
take a look at the 
<a href="#furtherReading">Further Reading</a>
section.
</p>

<h2>Quick Shortcuts</h2>

<ul>
<li><a href="#commands">AWL commands summary</a></li>
<li><a href="AWLReference.html" target="_blank">Full AWL Reference</a></li>
<li><a href="BrowseColorsByName.html" target="_blank">Colors by Name</a></li>
<li><a href="BrowseColorsByHue.html" target="_blank">Colors by Color</a></li>
</ul>



<p><a name='quickStart'></a></p>
<h2>Super-Quick Start</h2>
<p>
Click on the <em>Load Draft</em> button
near the top-middle of the screen and 
take a look at the built-in presets.
You can click in the little checkerboard
to the upper-right of the woven fabric,
but no other graphics on the right side will
respond to clicks
(if you get a red square when you try to
click in the checkerboard, then it's too
small for interaction - choose a smaller
number for <em>Fabric size</em> in the box
just above the fabric itself).
You can also change the design of the fabric
by altering what's in any of the five text boxes
on the left (and then pressing the arrow
to that box's right).
Start by changing colors (you can probably
guess at some reasonable color names for now),
and try fiddling with some of the numbers.
For now, keep all of your numbers in the range 0 to 7,
but you'll probably still get crazy results!
The text in those boxes uses a custom
pattern-making language that probably looks
cryptic to you now, but will soon become second nature.
</p>


<p><a name='toc'></a></p>
<h2>Table of Contents</h2>
<ul>
<li><a href="#quickStart">Quick Start</a></li>
<li><a href="#toc">Table of Contents</a></li>
<li><a href="#overview">Overview of The Digital Loom</a></li>
<li><a href="#rightSide">The Right Side: The Draft</a></li>
<li><a href="#patterns">From Input to Loom: Patterns</a></li>
<li><a href="#leftSide">The Left Side: AWL Input (and Output)</a></li>
<li><a href="#colors">Colors</a></li>
<li><a href="#makingPatterns">Making Patterns: The AWL Language</a></li>
<li><a href="#concepts">AWL Concepts</a></li>
<li><a href="#commands">The AWL Commands</a></li>
<li><a href="#notes">Notes on This Version of AWL</a></li>
<li><a href="#interface">The Rest of the Interface</a></li>
<li><a href="#savingAndLoading">Saving and Loading</a></li>
<li><a href="#faq">FAQ</a></li>
<li><a href="#furtherReading">Further Reading</a></li>
</ul>

<p><a name='overview'></a></p>
<h1>Overview of The Digital Loom</h1>

<figure class="figure ">
  <img src="images/OverviewOfDigitalLoom.jpg" width="800" class="img-rounded center-block" alt="Overview of the digital loom.">
  <figcaption class="figure-caption text-center">
Figure 1: The Digital Loom with major sections labeled.
</figcaption>
</figure>

<p>
Figure 1 shows the Digital Loom,
with the major components labeled.
To create a piece of woven fabric,
you type expressions in the AWL language
(described below) into the five input
boxes on the left.
After you've typed an expression in one of
the boxes,
press the arrow to its right to copy the
results onto the right side of the window.
</p>

<p>
Looms are sophisticated machines,
and weavers have their own terminology
for their art and their tools.
In this document I'll discuss our simple
loom and the process of using it to
weave fabric using very casual language.
See the references in the
<a href="#furtherReading">Further Reading</a>
section for more information on weaving and looms.
</p>

<p><a name='rightSide'></a></p>
<h2>The Right Side: The Draft</h2>

<p>
The right side of the window is 
collectively called the <strong>draft</strong>.
These checkerboards show you how your
loom is set up,
and the final fabric that results.
The checkerboards (and the two strips of colors)
are created in response to the strings you
type into the input boxes on the left hand side
of the window.
The fabric is automatically re-woven each
time you change one of the input expressions.
You can click in the tie-up in the upper right
to turn cells on and off;
no other elements of the draft are interactive.
If you try to click on the tie-up and you get
a red box,
that means the tie-up is too small for you to
edit.
You can make it larger on the screen by reducing
the size of the fabric,
by typing a smaller number into the <em>Fabric Size</em>
control just above the left side of the fabric.
</p>
<p>
Your job is to write expressions that create
drafts that produce fabrics you like.
So it's important to know how the draft
turns into the fabric.
Here's a crash course.
</p>
<p>
Think of the fabric as a grid.
We want to know the color of each cell
in that grid.
We use the three grids around the fabric,
and the single row or column of colors
on the outside of the two larger ones.
</p>
<p>
First up is the grid on the right.
We call that
the <strong>weft</strong>.
Each row of the weft is white except for
exactly one black square.
To the right of the weft is a column
of colors,
collectively called the <strong>weft colors</strong>.
Imagine that each cell in the weft colors
is a spool of a thread of colored
yarn whose thread runs perfectly horizontally to the left,
passing through each cell of the fabric to its left.
</p>
<p>
Next is the grid above the fabric.
This is
called the <strong>warp</strong>.
Each column of the warp is white except for
exactly one black square.
Above the warp is a row of colors,
collectively called the <strong>warp colors</strong>.
Imagine that each cell in the warp colors
is a spool of colored
yarn whose thread runs vertically downwards,
passing through each cell of the fabric beneath it.
</p>
<p>
Thus each cell in the fabric has two threads
passing through it.
We imagine that each thread is as wide as the cell,
so one of them will have to be on top while the
other is below it.
The cell will take the color of the thread on top.
To determine which thread is on top,
we use the third grid.
</p>
<p>
The grid above and to the right of
the fabric is called the <strong>tie-up</strong>.
Unlike the warp and weft,
the tie-up can have any arrangement of white
and black cells
(it can even be all white or all black,
though that would make a pretty boring fabric).
Unlike the warp and weft,
you can click in the tie-up to change its pattern
(as long as the cells are big enough on the screen).
</p>
<p>
So to color in the fabric,
we only need to know which thread is on top
in each cell.
This process is
illustrated in Figure 2.
We start with a cell in the fabric,
marked with a black outine.
</p>

<figure class="figure ">
  <img src="images/WeavingAlgorithm.jpg" width="600" class="img-rounded center-block" alt="The weaving algorithm.">
  <figcaption class="figure-caption text-center">
Figure 2: Finding the color of a cell in the fabric.
</figcaption>
</figure>

<ol>
<li>Look directly to the right, and find the black
cell in the weft for this row.</li>
<li>Look directly above, and find the black cell
in the warp for this column.</li>
<li>Look above the black weft cell, and to the
right of the black warp cell, to find a cell
in the tie-up. If that cell is black, the
warp thread is on top, so paint the cell with
the warp thread's color. Otherwise, the weft 
thread is on top, so use the weft thread's color.
</ol>

<p>
In the figure, we find that the cell marked in black
ends up at a black cell in the tie-up,
so we color this cell with the warp color
that is directly above it.
If the tie-up cell had been white,
we'd instead use the weft color directly
to the right of this cell.
In this draft, all the warp threads are the same
dark-blue color, so that's the color of this cell.
</p>
<p>
Although it's easy to state,
understanding how the warp, weft, and tie-up interact
to produce a design is anything but obvious!
You'll find that as you experiment with these three grids,
your intuition will grow,
and you'll get better at predicting what a particular
type of change will do to your design.
But part of the pleasure of having a digital loom at your
disposal is that it's easy to experiment,
and experiment again!
Just play and have fun,
and see what you can discover.
</p>
<p>
But if you can't click on the warp and weft
and their colors,
how do you set them up?
The answer is that the draft is created as a result
of the expressions you type into the input boxes
on the left hand side;
we'll turn to those now.
</p>

<p><a name='patterns'></a></p>
<h2>From Input to Loom: Patterns</h2>

<p>
The trick to describing a draft is to 
create a pattern of numbers that identify
which cells are to filled in with black.
You can then publish these numbers,
along with or instead of a picture of the draft,
and other weavers can then duplicate your design.
Many weaving programs let you enter your
warp and weft patterns by clicking on the
cells of their grids
(and we also allow that for the tie-up).
But when your drafts get really big,
that becomes a tedious and error-prone process.
And if you want to tweak your design by,
say, repeating one section somewhere in the middle,
you'd have a ton of clicking to do.
</p>
<p>
So instead, we create these number
patterns with a little language designed explicitly
for that.
We'll get into the language in the next section.
Here, we'll look at how to take each list of numbers
and apply it to the draft.
</p>
<p>
The key thing to this process is how we
name the cells of each grid.
And each grid is different!
That might seem crazy when you first encounter it, 
but it's a good scheme that
has been used for over a century.
Once you get used to it, you'll probably like it.
</p>
<p>
So let's dig in.
Figure 3 shows how each grid is counted.
Let's start with the warp,
located above the fabric.
Our rule is that each column in the warp has exactly
one black cell.
So we only need one number,
telling us where in the column the cell is located.
As the image on the right shows,
we start counting the warp by going up
along the rightmost column,
then we move one step left and go up again,
then one step left and go up again,
and so on.
</p>
<p>
Looking at the pattern in the warp,
we can see the rightmost column has
its black cell in row 1,
then moving left it's in row 2,
then row 3, then 4, then we're back
to 3, and we're back to 2.
I want this little section to repeat,
so I'll stop there.
The pattern for the warp in this
figure is <code>1 2 3 4 3 2</code>.
Note that I left the 1 off the end,
so that I can just repeat the pattern
over and over and the 1 doesn't get
duplicated.
</p>

<figure class="figure ">
  <img src="images/CountingOrder.jpg" width="800" class="img-rounded center-block" alt="Two drafts.">
  <figcaption class="figure-caption text-center">
Figure 3: 
We locate black cells in the warp (red) by going upwards, starting at the right and moving left.
We locate black cells in the weft (green) by going to the right, starting at the top and moving down.
The warp colors are filled in from right to left,
the weft colors from top down.
We fill in the tie-up (black) by going upwards,
moving from the left to the right.
</figcaption>
</figure>

<p>
The weft appears to the right of the fabric.
We follow a similar scheme,
only here the rule is that each row has a single
black cell.
So we start at the top row,
and count from the left to the right.
The pattern in this example is the same
as in the warp,
giving us the same pattern <code>1 2 3 4 3 2</code>,
which again is just repeated over and over 
as needed to make the fabric.
</p>

<p>
The warp colors are filled in from right to left,
like the columns of the warp.
In this example, our pattern is the colors
<em>Topaz</em> (beige) and <em>Grizzly</em> (dark brown).
So those two colors are placed,
in order,
from the right moving to the left,
and then repeated as needed.
The weft colors work the same way,
only from top down. Here we're using
<em>BlueJeans</em> followed by <em>Gray18</em>.
</p>

<p>
Finally, we have the tie-up.
Because each cell in the tie-up can be either
white or black,
we need to somehow list every cell our pattern.
So we just make a big list of 0's and 1's,
one entry for each cell in the tie-up grid.
In our system, <strong>1 is black</strong>
and <strong>0 is white</strong>.
If you use computer-based colors a lot this
may feel backwards.
It will make more sense if you think of someone
in a pre-computer age,
filling in a draft with a black ink on a
white sheet of paper.
If the draft says 0, the suggests doing nothing,
leaving the cell white.
If it says 1, then you fill in that square with
your pen, turning it black.
We count the tie-up starting in the bottom-left
corner and going upwards.
When we reach the top,
we move one column to the right, 
jump down to the bottom, and start going up again.
In this example,
the tie-up pattern is
<code>1 1 0 0 1 1 1 0 0 1 1 1 0 0 1 1</code>.
If you look at this closely,
you'll see it's just the pattern
<code>1 1 0 0 1</code> repeating over and over.
</p>

<p>
You'll be relieved to know that you'll very
rarely need to count things out like this.
Most of the time you'll be creating your
patterns using the pattern-making language,
and leaving all of this counting stuff up to
the computer.
</p>

<p>
To summarize, the following list completely
summarizes the draft in Figure 3,
and thus also completely specifies the pattern
of the fabric it leads to.
If you want to share your draft with other weavers,
this is all you need to give them,
and it's all you need to know from them to
recreate their drafts on your own loom.
</p>
<ul>
<li><strong>Warp pattern:</strong> 1 2 3 4 3 2</li>
<li><strong>Weft pattern:</strong> 1 2 3 4 3 2</li>
<li><strong>Warp colors:</strong> Topaz Grizzly </li>
<li><strong>Weft colors:</strong> BlueJeans Gray18 </li>
<li><strong>Tie-up:</strong> 1 1 0 0 1</li>
</ul>
<p>
All of these patterns are repeated as
needed.
The tie-up pattern, for instance, is repeated
until the entire tie-up grid is filled in
(if the pattern is bigger than the grid,
the excess is just ignored).
The warp and weft patterns,
and their colors,
are repeated until they're providing
a value to every cell in the fabric at
whatever size we want to make it.
</p>
<p>
Now that we know how lists of numbers
let us build a draft,
we'll see how to easily
make big lists of numbers that
lead to beautiful fabrics.
</p>

<p><a name='leftSide'></a></p>
<h2>The Left Side: AWL Input (and Output)</h2>

<p>
To fill in the grids of the loom,
we enter text expressions into the 
boxes on the left side of the window.
When you've typed something into one
of these boxes,
press the big arrow button to the right
of the box to update the loom.
The fabric will be automatically updated
using the new draft.
</p>
<p>
You can see the result of your expressions
in the black and white cells of the draft,
but sometimes it's more useful to see them 
in numerical form.
At the bottom of the left column there's a 
text box with a multi-part button above it.
Press the button to see the output from the
input box you're interested in
(when you press an arrow button,
the output automatically displays the 
output of the expression you just entered).
Note that this is strictly an output
area; you can't type into this box.
</p>
<p>
<h3>Weaving Quick Start</h3>
If you're new to the system and 
you want to play around with the inputs before
you learn the pattern language,
that's fine;
messing around is a big part of the fun.
Just type the patterns you want in your
loom right into each text box,
and press the arrow to its right to
copy that into the loom.
The <strong>most important thing</strong> to
remember is this: <strong>put spaces around
each number or color name</strong>.
For example,
to recreate Figure 3,
you'd type <code>0 1 2 3 2 1</code>
into the <em>Warp Pattern</em> box.
Note that each number is followed by a space,
and there are no commas, periods, or
other characters. Just numbers and spaces.
You'd type the same thing into the
<em>Weft Pattern</em> box.
You can even type <strong>Topaz Grizzly</strong>
into the <em>Warp Colors</em> box because
the Online Loom knows those colors by name.
Enter the weft colors and the tie-up,
and you should get back Figure 3!
If necessary, use the fields above the
fabric to set
<em>FabricSize</em> to 10, 
and <em>Tie-Up Width</em> and <em>Tie-up Height</em> to 4.
To make more fabric, just crank up the fabric size
to something like 100 or 200.
</p>

<p><a name="colors"></a></p>
<h2>Colors</h2>

<p>
Colors are a vital part of weaving,
and two of the AWL input areas on the left
are devoted to creating patterns of colors.
You can create big, complicated patterns
of colors using the AWL commands,
or you can just enter one or a few colors
by hand.
There are three ways to identify each color;
you can mix and match these as you like
even in a single expression.
</p>

<h4>By Name</h4>
<p>
This is probably the easiest option. The Digital Loom
knows 1303 different color names,
gathered from a wide variety of sources.
Probably any color name you know is in the list.
You can browse the colors 
<a href="BrowseColorsByName.html" target="_blank">sorted by name</a>
or
<a href="BrowseColorsByHue.html" target="_blank">sorted by hue</a>
using the links below.
Note that if a given color has multiple names,
I've retained all of them because some names might
be more familiar to you than others.
</p>
<ul>
<li><a href="BrowseColorsByName.html" target="_blank">Page of colors sorted by name</a></li>
<li><a href="BrowseColorsByhue.html" target="_blank">Page of colors sorted by hue</a></li>
</ul>
<p>
For example, a nice middle brown is
<code>HarvestGold</code>.
You don't have to worry about upper and
lower case letters.
You can write this color as
<code>harvestgold</code>
or <code>HARVESTGOLD</code> or even <code>haRVesTgoLd</code>,
and they'd all identify the same color.
</p>
<p>
Some names include characters
like parentheses,
digits, apostrophes, and dashes. 
These are all part of the name,
so be sure to include them.
But always make sure that you type 
in each color name
a single word with <em>no spaces</em>.
If you accidentally type a space,
AWL will read it as two separate
colors in a row to build a pattern
For example, if you put a space in 
<code>HarvestGold</code>, the system would look for a
color named <code>Harvest</code> and it wouldn't find
it, giving you black as a default.
Then it would search for <code>Gold</code>
and find it, since that's
an existing color.
So instead of a single brownish color,
you'd have a list of two colors,
black and gold, which probably would not
going to look the way you intended.
The moral is to make sure all of your
colors are single words without spaces!

<h4>By Hex</h4>
<p>
If you're familiar with the hex notation used by
browsers and some drawing programs,
you can use that.
Simply start your color with a hash mark (#)
and follow it with six hex digits
(the numbers 0 to 9, and the letters a to f or A to F).
Remember there cannot be a space between the
hash mark and the hex digits.
The color <code>HarvestGold</code> can be named
in hex as <code>#DA9100</code>
(case doesn't matter, so <code>#da9100</code>
works just as well).
You can also use the eight-digit form of a
hex color, but the first two digits
(which describe opacity) are ignored.
</p>

<h4>By RGB</h4>
<p>
You can also name your colors using red,
green, and blue values from 0 to 255.
Start with the string <code>rgb(</code>
and then list your values in the order
red, green, blue, separated by commas (<code>,</code>),
ending with a closing parentheses (<code>)</code>).
In this form, <code>HarvestGold</code> would be
written <code>rgb(218,145,0)</code>.
Remember, as always, there can be 
<em>no spaces</em> anywhere in this 
string (not even after the commas).
If you're a programmer, don't let your
fingers automatically add a semicolon
at the end!
</p>

<p><a name='makingPatterns'></a></p>
<h1>Making Patterns: The AWL Language</h1>

<p>
A digital loom lets us create large, complicated patterns
in our draft and see their results almost instantly.
Instead of clicking individually on hundreds of cells
to create your big patterns,
you type some commands into one of the 
input boxes.
The program turns those commands into a
potentially huge pattern for you,
and then fills in the loom grids instantly
and flawlessly.
This makes it fast and easy to experiment with 
both big and small changes to your draft,
whether you're perusing a vision,
following your intuition,
or just messing around at random!
</p>
<p>
The easiest AWL expression is just a list:
enter your numbers (or colors) and
press the arrow button to the right of
the box you're in.
But the real power of AWL comes from 
using its built-in commands to make
big, interesting patterns.
For example, look at the preset named
<em>Long Green</em>.
You can see the AWL expressions for the
warp and left in the boxes on the left
(don't worry about what how to read them
right now, just notice how short they are).
The warp expression makes a pattern
a bit over 800 numbers long,
and the warp is just over 600.
This means those two short expressions
specify a piece of fabric a little larger
than 800 wide and 600 tall
(looms, both real and digital, just repeat
this basic block over and over to make
as large a fabric as you like).
Imagine designing and then typing in
(or clicking!) 800 cells,
and then debugging the inevitable mistakes.
For something this size
(and also for many smaller drafts),
AWL is a much nicer way to go.
</p>
<h2>About Stack Based Languages</h2>
<p>
AWL is a <em>stack-based</em> language.
The traditional way to think about this
is to picture a <strong>stack</strong>
of cafeteria trays,
sitting one on top of the other.
We can write something on each tray:
a number, a string, a list of numbers,
whatever we decide.
We restrict ourselves to only two
operations on this stack:
we can <strong>push</strong> a new
tray onto the top,
or we can <strong>pop</strong> the
topmost tray off the stack.
That's it.
Of course, if we push a tray we no
longer have it in our hands;
it's on the stack.
And if we pop a tray it's no longer
on the stack,
but it's on our hands where we can
read its value and do something with it.
Those two things are all we can do:
there's no peeking into the stack,
re-ordering the trays,
or anything like that.
Just push a new tray on top,
or pop the top one off.
</p>
<p>
We say that if there are no trays,
we have an <strong>empty stack</strong>
(the thinking is that the stack is still
there in an abstract way,
but there's just nothing in it).
We'll make the rule that it's illegal
to try to try to pop the top tray off an empty
stack (since there are no trays to pop).
</p>
<p>
To add 5 and 3 we usually write <code>5+3</code>.
But in a stack-based language,
we write <code>5 3 +</code>.
Let's read this left to right.
We'll treat this as a string of
<em>words</em>, separated by white space.
There are two kinds of words:
<strong>data</strong> and <strong>commands</strong>.
Basically, anything that isn't a command
is presumed to be data.
</p>
<p>
So let's read <code>5 3 +</code>.
We start with an empty stack.
The first word is <code>5</code>.
That's not a command,
we we push it onto the stack,
which now has just one element,
the number 5.
The next word is <code>3</code>.
That's also not a command, so again
we push it.
Now our stack has two items on it:
the number 5 (on the bottom) 
and the number 3 (on the top).
The next word is <code>+</code>.
Aha, that's a command!
And we know it takes two values:
the left and right side of the 
addition symbol.
Since we want two pieces of data,
we'll pop the stack twice.
The first time we pop it,
we get the number 3, since that
was on top.
By convention, we'll treat that as
the data on the right side of the addition
sign, 
so now we're considering the
result of <em>something</em> plus 3.
We pop the stack again,
getting 5,
and that goes on the left side
of our traditional expression <code>5+3</code>.
Note that the stack is now emptyh.
So we evalute our two pieces of data using
the addition command,
getting the result <code>8</code>.
By convention,
all operators push their results back
onto the stack.
Since the stack was empty once we
popped the 5,
when we push the 8 onto the top of the
stack it's now the only element on the stack.
</p>
<p>
That's the basic idea in a nutshell
(see the
<a href="#furtherReading">Further Reading</a>
section if you crave more details).
The calculator example we gave above is
a famous way to illustrate a stack language.
And it's almost right for AWL,
but with a twist.
Our pieces of data are not number,
but <strong>lists</strong>.
They can be lists of numbers or lists of
colors, but either way they're always lists.
In AWL, 
a list has to have at least one element
(that is, at least one number or color),
but they can be as long as you like.
In fact, much of the power of AWL is that
you can create very big lists with just a
few commands.
Since our lists get turned into the 
grids of the warp, weft, and tie-up
(and the colors for the warp and weft),
having really long lists with lots of
interesting internal patterns can produce
large visual patterns with tons of interesting
structure and detail.
</p>

<p><a name='concepts'></a></p>
<h2>AWL Concepts</h2>

<p>
AWL commands are also called <strong>operators</strong>,
and the data they use are also called <strong>arguments</strong>.
We call any item on a list an <strong>element</strong>.
In AWL, an element is either a number or a color.
Any command that produces a result automatically
pushes that result onto the stack when it's done.
</p>

<h3>Numbers and Lists</h3>
<p>
AWL lists can be made up of either numbers or colors,
but you can't mix them.
Many commands don't care what kind of list they get.
For example, <code>reverse</code>
simply pops a list off the stack,
reverses the order of its elements,
and pushes the result back on.
You can give <code>reverse</code> a list
of numbers or colors, and it will happily
do the same job.
</p>
<p>
On the other hand, some commands require
lists of numbers. 
For example,
<code>block</code> takes two lists
(we'll call them <b>A</b> and <b>B</b>).
It makes a new list by repeating each
element of <b>B</b> the number of times
given by the corresponding element of <b>A</b>.
If
<code><b>A</b>=2 3 4</code>
and
<code><b>B</b>=1 5 8</code>,
the result of <code><b>A</b> <b>B</b> block</b></code>  would be
<code>1 1 5 5 5 8 8 8 8</code>.
If <code><b>B</b>=yellow blue red</code>,
the result of block would be
<code>yellow yellow blue blue blue red red red red</code>.
So for the <code>block</code> command,
list <b>A</b> has to contain numbers,
while list <b>B</b> can hold either numbers or colors.
</p>
<p>
The table below identifies whether each 
list must be made up of all numbers,
or all colors,
or either.
</p>

<h3>How To Enter Two Lists In A Row</h3>
<p>
To push a list onto the stack,
you just give its values.
So whether your list has one element
(a number or color), or ten of them,
you just name them all.
As always, 
each list item  must be a single string of
characters with no spaces,
and each element must be 
separated from the others with a space.
</p>
<p>
But what if you want to push two lists
in a row?
Many AWL commands take two lists,
so they expect to pop a list off the stack,
and then another.
Suppose your first list is 
<code>1 2 3</code> and your second is <code>9 8 7 6</code>.
If you typed <code>1 2 3 9 8 7 6</code> into
the input box,
you'd be creating one list with seven elements.
The trick is to call <code>push</code>
between one list and another:
<code>1 2 3 push 9 8 7 6</code> does the trick.
Now the stack holds two new elements
(on top of whatever might have been there before):
one entry with the list <code>1 2 3</code>,
and on top of that (and on top of the stack)
is the list <code>9 8 7 6</code>.
Forgetting to push between two lists is a common
mistake, so if things go wrong for you,
this is a good first thing to check for.
Because you'll use <block>push</block> so much,
there's a shortcut for it:
the forward slash (technically called a <em>virgule</em>): <code>/</code>.
So you'll often see the above example written simply
<code>1 2 3 / 9 8 7 6</code>.
</p>
<p>
This situation is pretty much the only 
time you'll ever need to explicitly push something
onto the stack,
because
the rest of the time the system manages all the
pushes for you.
In particular, if you name a list and then
follow it with a command name,
the system will automatically push the list
onto the stack for you.
So if we imagine a command named <code>floop</code>
that takes one list as an argument,
<code>1 2 3 floop</code>
is the same as <code>1 2 3 push floop</code>
or <code>1 2 3 / floop</code>.
Since it's good to keep your AWL as simple
as possible (so it's easy to understand and modify),
I suggest leaving out those extraneous push
commands (in my expressions, I always leave them out).
</p>

<h3>Results Get Pushed Automatically</h3>
<p>
Any command that produces a result will push
that result back onto the stack automatically
as a new list.
</p>
<p>
For example, the expression
<code>1 2 3 reverse</code>
will cause <code>1 2 3</code> to be
popped off by <code>reverse</code>,
and when that command is done,
it will push its result <code>3 2 1</code>
onto the top of the stack.
</p>

<h3>Draft Sizes</h3>
<p>
When your AWL is copied to the warp,
it will draw a grid that starts at 1,
but extends upwards as high as necessary
to include your expression.
So if your expression has the values 3 through 13,
you'll get a warp that's 15 units high
(because we always start at 1).
Note that if this is bigger than the tie-up,
the tie-up will get automatically repeated
internally to match your huge warp;
this will usually give you surprising results.
All of the above also holds for the weft.
</p>
<p>
You can control the size of the fabric by
using the <em>Fabric Size</em> control located
just above the fabric.
As you make the fabric larger,
the individual cells in the draft necessarily
get smaller.
If you want to edit the tie-up interactively
with mouse clicks,
the cells have to be big enough for you to
be able to point to them accurately.
If they're too small, you'll see a red box
when you click. 
That's your signal to make the loom cells
bigger by choosing a smaller fabric size.
</p>

<h3>The Domain</h3>
<p>
When you have 8 threads in your warp
and weft (the starting default),
then your pattern can only refer to threads
numbers 1 through 8.
This range [1,8] is called the <strong>domain</strong>.
</p>
<p>
When you're entering AWL, most of the time
you don't need to think about the domain.
The exception is when you use AWL commands
that create <b>runs</b>.
A run is a pass through the whole domain,
going either up or down.
For example,
a run starting at 3 
using the default domain
is <code>3 4 5 6 7 8 1 2</code>.
If the domain was instead [2, 6],
then a run starting at 3 would be
<code>3 4 5 6 2</code>.
Most of these commands have the 
word <code>run</code> in them.
</p>
</p>
<p>
The same principle applies to counting down.
For example,
counting down from 3 in our default
domain would produce the run <code>3 2 1 8 7 6 5 4</code>.
</p>
<p>
You set the two ends of the domain
with the <code>domain</code> command.
You can use this command to
change the domain in the middle of an AWL expression.
For example, if your warp has only 4 threads,
you probably want to wrap around your up counts
after 3. 
Many commands let you specify the start
and end values for a run.
For example, <code>up</code>
takes two lists,
and inserts an upward ramp from the
last element of the first list to
the first element of the second list.
So in our standard domain, 
<code>1 2 / 1 2 up</code>.
would give us
<code>1 2 3 4 5 6 7 8 1 2</code>
(the middle part, <code>3 4 5 6 7 8</code>, is the run).
But if you want to use a domain from 1 to 4,
you'd write
<code>1 / 4 domain 1 2 / 1 2 up</code>,
which would produce
<code>1 2 3 4 1 2</code>.
Keep in mind that your new domain will remain
in effect until you change it again.
Each input box maintains its own domain,
and it always starts out with the range [1,8].
</p>

<h3>Automatic Resizing</h3>

<p>
Some commands require both lists to have
the same length.
For example, we saw above that <code>block</code>
takes two lists, <b>A</b> and <b>B</b>.
It takes the first number in <b>A</b>,
and repeats the first element of <b>B</b> that
many times.
Then it gets the second number in <b>A</b>,
and repeats the second element of <b>B</b> that
many times.
Because the elements of the two lists are
matched up one to one,
both lists need to have the same length,
or the same number of elements.
</p>
<p>
All of the commands that have this requirement
will automatically <em>resize</em> the input
lists for you by repeating the shorter one
as needed until it's as long as the longer
list (if the repeated list gets too long,
we just drop the extraneous elements at the end).
This doesn't change your input lists,
and it all happens under the hood.
But we identify which commands automatically
resize for you,
so you won't have to spend effort doing it yourself.
</p>

<p><a name='commands'></a></p>
<h2>The AWL Commands</h2>

<p>
Here we'll collect all the AWL commands 
together in a big table.
In this table,
the
bold capital letters <b>A</b> and <b>B</b>
stand for lists,
and lower-case letters
<var>c</var> and <var>d</var>
stand for single numbers
(technically, a single number is a list,
but here we mean to indicate that this
list must have only one element).
A0 and AL refer to the first
and last elements of list A (and B0 and BL do the
same for list B).
Ai refers to the i'th element of A,
and Bi is the same for B.
</p>
<p>
The column headings can be interpreted this way:
</p>
<ul>
<li><strong>Command:</strong>  The command name
</li>
<li><strong>Short:</strong> The command's shortcut, if it has one
</li>
<li><strong>List A:</strong>  checked if <b>A</b> must be numbers
</li>
<li><strong>List B:</strong>  checked if <b>B</b> must be numbers
</li>
<li><strong>Wrap:</strong> checked if this command wraps its output numbers around the domain
</li>
<li><strong>Resize:</strong>  checked if this command make both lists the same size by repeating the shorter list
</li>
<li><strong>Summary:</strong> A short description of what the command does
</li>
</ul>

<p>
AWL has a bit more than 40 commands. I won't run through
them all here.
You can find a discussion of each one in Part 2 of my CG&A
Digital Weaving series,
which again you can read for free by going to my
list of
<a href="http://www.glassner.com/computer-graphics/cga-columns/" target="_blank"">my CG&A columns</a>,
or read in 
<a href="http://www.glassner.com/portfolio/morphs-mallards-and-montages/" target="_blank">my book</a>
that collects those columns.
Note that this version of AWL is a bit different than
what's described in those references.
After the table is a summary of the differences.
</p>
<p>
Remember that the first thing popped off the stack is the
most recent thing pushed.
So for example, the commmand summarized
<code><b>A</b> <b>B</b> <var>c</va> ramprun</code>
expects three elements on the stack:
on top (and most recently pushed) is the number <var>c</var>,
under it (and pushed just before <var>c</var>) is the list <b>B</b>,
and on the bottom (and first thing pushed in this group) is the list <b>A</b>.
</p>
<p>
Also remember that each command will push its result back on the stack
when it's done.
If the command makes one or more lists,
it will not push any lists that are empty
(for example, calling <code>0 1 2 / 5 split</code> will push only
the "left side" of the split, or the list <code>0 1 2</code>,
because this split point is past the end if the input list,
yielding no new list after the split).

<div style="margin-top:50px;"></div>

<table id="awlsummary" class="table table-striped table-bordered table-condensed">
	<thead>
		<tr>
			<th>Command</th>
			<th>Short</th>
			<th>List <b>A</b></th>
			<th>List <b>B</b></th>
			<th>Wrap</th>
			<th>Resize</th>
			<th>Summary</th>
		</tr>
	</thead>
	<tbody>

<tr>
	<td><b>A</b> binary0</td>
	<td>b0</td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Treat <b>A</b> as alternating runs of 0s and 1s</td>
</tr>
<tr>
	<td><b>A</b> binary1</td>
	<td>b1</td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Treat <b>A</b> as alternating runs of 1s and 0s</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> block</td>
	<td>#</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>Each <b>A</b>i is repeated <b>B</b>i times</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> blockpal</td>
	<td>#p</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>block with internal palindrome</td>
</tr>
<tr>
	<td><b>A</a> <b>B</b> cipher</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td>Replace each entry of value i in <b>A</b> with <b>B</b>(i mod (len <b>B</b>))</td>
</tr>
<tr>
	<td>clear</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Erase the stack</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> concat</td>
	<td>,</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Concatenate the top two stack elements</td>
</tr>
<tr>
	<td><var>c</var> <var>d</var> domain</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Set the domain to [<var>c</var>, <var>d</var>]</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> down</td>
	<td>&gt;</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><b>A</b>, descending run from <b>A</b>L to <b>B</b>0, <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> <var>c</var> downrun</td>
	<td>&gt;r</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td>Like down, but includes <var>c</var> runs as well</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> downup</td>
	<td>&gt;u</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i>*</td>
	<td>Alternating down and up runs (<strong>A</strong> may be 1 longer than <strong>B</strong)
</tr>
<tr>
	<td><b>A</b> <b>B</b> <var>c</var> downuprun</td>
	<td>&gt;ur</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i>*</td>
	<td>Like downup but include <var>c</var> runs as well</td>
</tr>
<tr>
	<td><b>A</b> dup</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Pop the top of the stack and push it back twice</td>
</tr>
<tr>
	<td><b>A</b> <var>d</var> extend</td>
	<td>+</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>repeat or clip <b>A</b> to <var>d</var> elements</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> growblock</td>
	<td>=</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>Interleave <b>A</b> with growing palindromes of <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> iblock</td>
	<td>i#</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>Like block but the inputs are interleaved in <b>A</b></td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> interleave</td>
	<td>%</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>Take alternating elements of <b>A</b> and <b>B</b></td>
</tr>
<tr><td>InterleaveSteps %s TK</td></tr>
<tr>
	<td><b>A</b> iblockpal</td>
	<td>i#p</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>iblock with internal palindrome</td>
</tr>
<tr>
	<td><b>A</b> <var>d</var> nth</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Take every <var>d</var>'th element of <b>A</b></td>
</tr>
<tr>
	<td><b>A</b> palindrome</td>
	<td>|</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td><b>A</b> followed by its near reversal</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> pbox</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td>Shortcut for <b> A B A </b> veclen extend permute</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> permute</td>
	<td>&</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td>Use elements of <b>B</b> to index <b>A</b></td>
</tr>
<tr>
	<td><b>A</b> pop</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Discard top of the stack</td>
</tr>
<tr>
	<td>push</td>
	<td>/</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Consider all since last command a single list</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> ramp</td>
	<td>-</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
   <td><b>A</b>, up or down as needed to stay in domain, <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> <var>c</var> ramprun</td>
	<td>-r</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td>Like ramp but include <var>c</var> runs as well</td>
</tr>
<tr>
	<td><b>A</b> <var>d</var> repeat</td>
	<td>*</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>repeat <b>A</b> a total of <var>d</var> times</td>
</tr>
<tr>
	<td><b>A</b> reverse</td>
	<td>@</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>reverse the elements of <strong>A</strong></td>
</tr>
<tr>
	<td><b>A</b> <var>d</var> rotatel</td>
	<td><<</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>rotate <b>A</b> left by <var>d</var> steps</td>
</tr>
<tr>
	<td><b>A</b> <var>d</var> rotater</td>
	<td>>></td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>rotate <b>A</b> right by <var>d</var> steps</td>
</tr>
<tr><td>ShowStack showstack TK</td></tr>
<tr><td>Skipkeep skipkeep TK</td></tr>
<tr>
	<td><b>A</b> <var>c</var> split</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Cut <b>A</b> after element <var>c</var>, then push the left then right lists</td>
</tr>
<tr>
	<td><b>A</b> <var>c</var> <var>d</var> stencil</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Remove entry <var>c</var>, include the next <var>d</var> entries, repeat</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> swap</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Exchange the top two stack elements</td>
</tr>
<tr>
	<td><b>A</b> tartan</td>
	<td> </td>
	<td></td>
	<td>n</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>Like iblock but repeats are half length</td>
</tr>
<tr>
	<td><b>A</b> tartanpal</td>
	<td> </td>
	<td></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td>tartan with internal palindrome</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> template</td>
	<td>:</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Create a subarticulation using <b>B</b> as a template</td>
</tr>
<tr>
	<td><b>A</b> <var>c</var> <var>d</var> twilll</td>
	<td>t&lt;&lt;</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Rotate left by <var>c</var> steps, <var>d</var> times</td>
</tr>
<tr>
	<td><b>A</b> <var>c</var> <var>d</var> twillr</td>
	<td>t&gt;&gt;</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Rotate right by <var>c</var> steps, <var>d</var> times</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> up</td>
	<td>&lt;</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td><b>A</b>, ascending run from <b>A</b>L to <b>B</b>0, <b>B</b></td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> <var>c</var> uprun</td>
	<td>&lt;r</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td>Like up, but includes <var>c</var> runs as well</td>
</tr>
<tr>
	<td><b>A</b> <b>B</b> updown</td>
	<td>&lt;d</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i>*</td>
	<td>Alternating up and down runs (<strong>A</strong> may be 1 longer than <strong>B</strong)
</tr>
<tr>
	<td><b>A</b> <b>B</b> <var>c</var> updownrun</td>
	<td>&lt;dr</td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i></td>
	<td><i class="fa fa-check"></i>*</td>
	<td>Like updown but include <var>c</var> runs as well</td>
</tr>
<tr>
	<td><b>A</b> veclen</td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Push the length of <b>A</b></td>
</tr>
<tr>
	<td><b>A</b> vmax</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Push the largest element in <b>A</b></td>
</tr>
<tr>
	<td><b>A</b> vmin</td>
	<td> </td>
	<td><i class="fa fa-check"></i></td>
	<td> </td>
	<td> </td>
	<td> </td>
	<td>Push the smallest element in <b>A</b></td>
</tr>
    </tbody>
  </table>



<p><a name='notes'></a></p>
<h2>Notes on This Version of AWL</h2>

<p>
Here are the key differences between what's in 
<a href="http://www.glassner.com/computer-graphics/cga-columns/" target="_blank"">my CG&A columns</a>
and
<a href="http://www.glassner.com/portfolio/morphs-mallards-and-montages/" target="_blank">my book</a>,
and what's implemented here.
</p>

<ul>
<li><strong>template:</strong> Templates are no longer automatically made relative to the
first number in the second list. So the values you add to each
number in your starting list are simply the numbers you provide.
For example, <code>3 4 : 1 2 3</code> will add the values <code>1 2 3</code>
to <code>3</code> and then to <code>4</code>, producing <code>4 5 6 5 6 7</code>.</li>
<li><strong>updown, updownrun, downup, downuprun:</strong> These four
commands normally reshape the two input lists so they have the same size.
Introduced to the online version, this resizing won't happen if
the first list can have 1 more element than the second one. This way
you can make nice repeating patterns of up and down ramps.
For example, <code>0 1 / 4 updown</code> has two elements in the first
list (<code>0 1</code>)and only one in the second (<code>7</code>).
These lists won't be resized, so the result goes up from <code>0</code>
to <code>4</code>, then back down to <code>1</code>,
giving you the nice up-down sequence <code>0 1 2 3 4 3 2 1</code>.
When this automatically repeats you'll get a nice triangle wave 
repeating forever (a perfect starting point for twills).</li>
<li><strong>twillr, twilll:</strong> These commands got a little 
confused. Here's how they work now.
<ol>
<li>
I implemented them backwards in the original code,
so they rotated in the directions opposite to their names.
That's fixed now (and the examples have been updated
to reflect that).</li>
<li>
Both commands take as input a list <code>A</code>
and two numbers
<code>c</code>
and 
<code>d</code>,
in that order.
The list gets repeated <code>d</code> times.
The first time it appears just as given.
The second time it's rotated right (or left) by <code>c</code>
steps.
The next time that most recent version gets rotated right
(or left) by another <code>c</code> steps, and so on.
So for example,
<code>0 1 2 3 / 1 / 4 twillr</code>
will produce the list
<code>0 1 2 3</code>,
then it gets rotated right once to produce
<code>3 0 1 2</code>,
then rotated again to make
<code>2 3 0 1</code>,
and then a fourth time to produce
<code>1 2 3 0</code>,
giving a final result of
<code>0 1 2 3 3 0 1 2 2 3 0 1 1 2 3 0</code>.
</li>
</ol>
<li>The domain minimum is set to 0 if you try to make it negative.
The domain maximum is always 1 more than the minimum.</li>
<li>When the warp and weft patterns are copied to the draft,
any values less than 0 are set to 0.</li>
<li>The <code>cipher</code> command is new.</li>
<li>The <code>split</code> command is new.</li>
<li>The <code>stencil</code> command is new.</li>
</ol>
</li>
</ul>

<p>
Here are some helpful hints to keep in mind.
</p>

<ul>
<li>AWL expressions can get complicated very quickly if you let them.
Start simple, and add small bits of complexity one step at a time.</li>
<li>The output window will always show you what's left on top of the stack
when your expression has been evaluated. </li>
<li>A good way to experiment with AWL commands and get a feeling for them
is to ignore the loom and the fabric. Just write little expressions in one
of the input windows and press the arrow,
and see what it generates by looking at the output window below.
</li>
<li>Remember to push between lists! This is an easy thing to forget.</li>
<li>Make sure to keep track of your domain. It starts at [0,7] for both warp and
weft. If you change it, that change stays in effect for the rest of that
expression. You can always set it back to [0,7] if you want.
<li>Make sure you have the tie-up sizes set the way you like. The tie-up doesn't
automatically re-size to fit your warp or weft (that would make it much harder
to experiment with your drafts).</li>
<li>When in doubt, just type in your pattern explicitly;
not everything has to be a clever AWL construction.
For example, if you want the pattern <code>0 1 3 5 2</code>,
it's probably easiest to just type that directly into the text area
and move on.
This is particularly useful for colors,
where the lists are frequently just a single color.
</li>
</ul>

<p><a name='interface'></a></p>
<h2>The Rest of the Interface</h2>

<h3>Fabric and Tie-up Size</h3>
<p>
Just above the fabric there are three boxes for you to type in numbers.
</p>
<ul>
<li><strong>Fabric size:</strong> The fabric is always a square. This tells
the program how big that square should be. The warp and weft patterns and
colors are simply repeated as necessary to match the fabric's size.
</li>
<li><strong>Tie-up width:</strong> </li>
<li><strong>Tie-up height:</strong> You can make the tie-up any size you
like, as long as each dimension is at least 2 units.
The data in the tie-up AWL input is used to fill in the grid
starting at the top left and going right,
then down a row and repeating left to right,
and so on.
If there's more data in the tie-up pattern than is needed,
the extra is just ignored.
If the tie-up pattern isn't long enough to fill up the grid,
it's repeated as needed.
</ul>

<p><a name='savingAndLoading'></a></p>
<h3>Saving and Loading</h3>

<h4>Saving The Fabric</h4>

<p>
To save the image of the fabric,
just right-click on it.
You should get a pop-up menu that
offers you a few options.
One of these will be <em>Save Image As...</em>
(or something close to that).
Choose that,
and you'll get a standard dialog box
letting you put the image where you want it.
The image is saved in the standard PNG format,
which offers the highest quality.
You can change that to JPG or anything else
using almost any image editing program.
</p>

<h4>Saving and Loading The Draft</h4>

<p>
Because of how browsers are written,
you cannot save and load your drafts to your
local hard drive
(saving the image of your fabric uses a
special exemption for images).
So you need to use some kind of remote
file system, usually called <em>the cloud</em>.
Since all cloud services are different,
I can't support them all.
I chose to support a popular cloud service
called <a href="https://db.tt/TeyvYvem" target="_blank">Dropbox</a>.
They have a great reputation for privacy and reliability,
and they offer you 3GB of storage for free.
They stay in business by selling you more space than
that if you need it.
If you don't have Dropbox yet, 
click on
<a href="https://db.tt/TeyvYvem" target="_blank">this link</a>
to sign up for a free account
(disclaimer: by using the link, rather than going to
Dropbox directly, they give me some more storage.
I use that space to develop apps like this.
But you can go straight to 
<a href="https://www.dropbox.com" target="blank">Dropbox</a> 
if you prefer to bypass my link).
</p>
<p>
If you're not logged into Dropbox,
you'll be prompted to sign in
when you try to load or save a file.
The first time you use the program,
it will ask for permission to read and write
files to a special folder in your Dropbox
set aside for this app.
This is perfectly safe. 
Your password and all of your files are yours
and yours alone, and I never see any of it.
I don't even have a way of knowing if you've
done this! It's just so Dropbox knows that
this is something you've meant to do.
When you approve this,
Dropbox will create a folder for you in
your Dropbox account called 
<code>Apps/AndrewsOnlineLoom</code>,
and all of your files will be placed there.
Note that if you want to share one of those
files, you'll want to copy it into the
<code>Public</code> part of your Dropbox,
as usual.
</p>
<p>
To save your draft,
give it a name by typing
in the text box at the very 
top of the window,
and then press the <strong>Save</strong> button.
You don't have to give it an extension;
the program will automatically add <code>.wif</code>
for you if it's not there.
WIF is the standard format that weaving
programs use to describe a draft
(you can find out more in the FAQ below).
</p>
<p>
To load a draft, just choose
<strong>Load Draft</strong>.
You'll get a drop-down list with two parts.
At the top are all the .wif files in your
Dropbox (or an invitation to log in if you
haven't done so already).
Below that is a list of <em>presets</em>,
or drafts that I've made for you as
examples.
You can't modify or save the presets,
but you can change them and save your own
copies in your Dropbox.
</p>
<p>
If you want to change the names of
your .wif files, copy or delete them,
or do anything else with them,
just use your normal file-system
browser to view the contents of
<code>Dropbox/Apps/AndrewsOnlineLoom</code>,
probably located in your home directory.
You can even read the .wif files if you
like; they're just plain text.
</p>


<p><a name="faq"></a></p>
<h1>FAQ</h1>

<h3>The AWL table is way too cryptic. What do these commands really do?</h3>
<p>
The table is just a quick reference.
A more detailed description of each
command can be found <a href="AWLReference.html" target="_blank">here</a>.
</p>
<p>
If you prefer to learn by experimenting,
go for it!
Just type in stuff and see what comes out.
</p>

<h3>Why can't I click in the warp or weft patterns, like I can in the tie-up?</h3>
<p>
The tie-up is essentially a random bunch of 0's and 1's,
so it makes sense to let you change them interactively.
I can automatically compute a reasonable AWL from any tie-up,
so I do that and  paste it into the Tie-up input box for you
each time you click a tie-up cell.
</p>
<p>
But if you were to click in the warp or weft and change
even one entry,
it wouldn't be feasible
for me to figure out a new set of AWL
commands that describe that new pattern.
So your best bet is to modify your AWL input
to create the pattern you want.
If you want to individually tweak lots of individual entries in, say, 
the warp pattern,
the easiest way would probably be to copy the big
list of numbers from the output box
(set to show you the warp pattern, of course),
and paste that list into the warp pattern input box.
Then you can edit that list as you like,
and each time you press the arrow the loom and fabric
will be updated.
</p>

<h3>What if I don't want to use Dropbox?</h3>
<p>
No problem. The online loom will still run fine.
You can even load the presets,
and you can save your fabric images.
But you won't be able to load and save
your drafts, nor import the drafts from
other people or those published in books
or available online.
</p>
<p>
I wish I could support all cloud services,
but each one requires me to write special 
programming to talk to it, and for some 
services that can get very complicated.
I picked Dropbox because they're reliable
and take privacy seriously, and they offer
a lot of free storage (3GB is <em>huge</em>;
you can store over a half-million typical
.wif files in that much space!).
</p>
<p>
If you really love another service, 
you can use that for your everyday work,
and just drag your .wif files into and out
of your Dropbox and into your other service
when you want them there.
</p>
<p>
If you want to save your drafts but you
really don't want to go anywhere near Dropbox,
you can always take a screenshot of the 
program, and then type everything back in
from there to re-load the draft.
</p>
<h3>How do I share my drafts?</strong></h3>
<p>
The .wif files are just plain text files.
Just share them as you'd share any text file!
</p>

<h3>What's this WIF format all about?</h3>
<p>
It's a format designed in 1997 by a group of
authors of weaving software so that their
users could share their drafts.
It's simply a set of rules for how to 
write your draft into a plain-text file.
You can find the specification
<a href="http://www.mhsoft.com/wif/wif1-1.txt" target="_blank">here</a>.
</p>
<p>
My loom writes simple WIF files that omit
a lot of optional stuff,
like thread spacing and thread thickness.
If you're reading a WIF file with that
information in it, my program just ignores that stuff
(which means it isn't included if you later
save the file to the same or a different name).
</p>

<h3>I found a draft where there are lots of black squares
in the warp columns and weft rows. What gives?</h3>
<p>
I am not a weaving expert,
but my understanding is that those drafts are
for varieties of looms that don't have tie-ups.
I don't support those kinds of drafts;
if you try to read them in you'll find that I
ignore all but the first marked column or
row in the warp and weft.
</p>

<h3>Why am I getting a really weird error when my AWL looks fine?</h3>
<p>
A very frequent cause of weird errors is messing up the spacing rule.
Remember that each <em>word</em> in AWL must be surrounded by space.
That means each number and each command.
For example, the shortcut for <code>twillr</code> is <code>t>></code>,
all one word with no spaces.
And if you want to concatenate three lists together,
you'd write <code>, , ,</code> with a space between each comma.
Leaving out those spaces, or including extra ones where they don't belong,
is an easy mistake to make.
</p>


<h3>How do I debug my AWL?</h3>
<p>
If things are going wrong, I find it easiest to write down the whole
expression I'm working on, and then build it up again one step at a time.
Type in one new piece of stuff to build the pattern, hit the button,
and see what's on top of the stack. If that looks right, continue.
If it doesn't, tune up what you have there until it does.
</p>

<h3>You said there should be just one thing left on the stack at the end, but I have more. Is that a problem?</h3>
<p>
Not necessarily, if what's on top is the result you want. But usually that indicates a problem. A common cause of this comes from building up your expression in pieces, but then forgetting to concatenate them together into one big pattern when you're done. A lot of complicated expressions end with a bunch of commas (the concatenation shortcut) to glue together all the intermediate results sitting on the stack.
</p>

<h3>AWL isn't much of a language. Where are the variables, loops, procedures, etc.?</h3>
<p>
AWL isn't a general-purpose programming language, and it doesn't need all that stuff.
It's been designed for one thing only: to help you make cool patterns of numbers
and colors that are useful in weaving. You don't need variables, loops, and all that
stuff to do that.
If you find yourself wanting to use all of those tools to make your expressions,
or you want to use arithmetic or even math operators,
your best bet is to fire up your favorite language and write programs in it.
The easiest output would be a big list of numbers or colors,
which you can just copy and paste into the appropriate input boxes.
If you're feeling fancy, you can use your program to write AWL expressions.
If you're really ambitious, you can write .wif files directly;
see the question above for a link to the format specification.
</p>

<h3>Hey! You crashed my browser!</h3>
<p>Sorry! 
This probably happened after you pressed one of the arrows
to turn your AWL into a pattern for the loom.
The truth is that there are a lot of ways that things can go
wrong when we turn your AWL into a pattern.
I've tried to catch all of them,
and to give you at least some information about where things
went wrong.
If something slipped past me and crashed your browser,
I'd love to fix it.
The catch is that I'd need the <em>exact</em> AWL expression you
were trying to translate at the time of the crash,
and that's probably gone because,
well,
the browser's crashed.
So if you can,
try to immediately re-load the page and recreate the problem.
Copy the text in your input box (or take a screen shot)
frequently each time you get
closer to the problem.
Then when it does crash,
you'll be able to send me email and simply paste the
offending AWL right into the body of the mail.
</p>

<p><a name="furtherReading"></a></p>
<h1>Further Reading</h1>
<p>
Wikipedia provides a very nice introductory article on
<a href="https://en.wikipedia.org/wiki/Weaving" target="_blank">weaving</a>,
and another on the fascinating and diverse technology behind real
<a href="https://en.wikipedia.org/wiki/Loom" target="_blank">looms</a>.
</p>
<p>
Weavers have been collecting and sharing drafts since at
least the 1830s.
Of course, most of those drafts are necessarily small in size,
but there are some large ones out there.
This is particularly surprisingly when you realize that to
determine what a particular draft will produce,
you usually have to weave the result!
And once colored threads are involved,
predicting the result just by eyeballing the draft
seems incredibly hard.
You can find literally thousands of drafts in your
library, collected in old books that contain page after
page of draft diagrams.
Here are three books I found particularly useful:
<ul>
<li>B. Frey, Designing and Drafting for Handweavers, Macmillan, Basingstoke Hampshire, England, 1958.</li>
<li>M.E. Black, The Key to Weaving, Hungry Minds, Hoboken, N.J., 1980.</li>
<li>A Weaver's Book of 8-Shaft Patterns, Carol Strickler, ed., Interweave Press, 1991.</li>
</ul>
</p>
<p>
Some draft descriptions are available online.
The world of online drafts seems to be in constant flux,
with old repositories disappearing and new ones popping up,
so I suggest the best way to get started is to do some searching.
Most of the sites I've found over the years are gone,
but 
<a href="http://www.allfiberarts.com/cs/patternsdrafts.htm">Fiber Arts</a>
still seems up and offering a nice collection of drafts.
Ralph E. Griswold is a famous collector of weaves and author
on the subject.
You can find a ton of information at 
<a href="http://www.cs.arizona.edu/patterns/weaving/front_door.html" target="_blank">his website</a>,
including scanned-in versions of long out-of-print books on weaving and collected drafts.
You can even find some sample code for weaving topics 
<a href="http://www.cs.arizona.edu/patterns/weaving/FA/index.html" target="_blank">here</a>.
A good starting point for
tartan drafts can be found at the
<a href="http://www.house-of-tartan.scotland.net/">House of Tartan</a>.
</p>
<p>
There are a variety of commercial and public-domain programs
available to weavers.
My Online Loom is mainly intended to help you create
cool patterns with AWL.
It wasn't meant to model the rich diversity and complexity
of real looms.
In other words, the Online Loom was designed to complement,
not replace,
these feature-rich, dedicated programs,
written by and for serious weavers.
If you find that you're enjoying working with the Online Loom,
you might want to consider trying a commercial product.
Here are the weaving systems that I know of now.
If I'm missing your favorite, let me know!
I'm sorry that I can't offer any buying advice;
each of these programs offers lots of online information
to help you make the choice that's best for you.
In alphabetical order, they are
</p>
<ul>
<li><a href="http://www.fiberworks-pcw.com/" target="_blank">Fiberworks</a></li>
<li><a href="http://www.mhsoft.com/" target="_blank">PatternLand</a></li>
<li><a href="http://www.weaveit.com" target="_blank">WeaveIt</a></li>
<li><a href="http://www.weavemaker.com" target="_blank">WeaveMaker</a></li>
<li><a href="http://www.weavepoint.com" target="_blank">WeavePoint</a></li>
</ul>
<p>
My weaving language AWL was inspired by
the weaving language provided in the very first release
of the commercial artist's program 
<a href="http://www.painterartist.com/us/product/paint-program/" target="_blank">Painter</a>.
I've extended that language significantly,
inspired by online and offline references on weaving.
Of particular value were monographs by Ralph Griswold, mentioned above.
For instance,
the <code>growblock</code> operator is based on Griswold's
paper, "Variations On A Shadow Weave."
</p>
<p>
The named colors in the Online Loom database were collected from
a list of colors on
<a href="https://en.wikipedia.org/wiki/List_of_colors_%28compact%29" target="_blank">Wikipedia</a>,
a list of colors provided as part of Microsoft's
<a href="http://www.opinionatedgeek.com/DotNet/Tools/Colors/default.aspx" target="_blank">.NET</a>
framework,
color measurements I made from online pictures of real tartan cloth,
and a few other colors I've used in projects over the years.
</p>
<p>
The original description of AWL and my Digital Loom
appeared in 3 successive installments of my
column <em>Andrew Glassner's Notebook</em>,
which I wrote for the journal <em>IEEE Computer Graphics & Applications</em>.
You can find those three columns in PDF form for free by going to
<a href="http://www.glassner.com/computer-graphics/cga-columns/" target="_blank"">my CG&A columns page</a>,
and scrolling down to the three columns starting with 
called <em>Digital Weaving Part 1</em>.
I later collected many of my CG&A columns,
expanded and revised them,
and assembled them into the book
<a href="http://www.glassner.com/portfolio/morphs-mallards-and-montages/" target="_blank">Morphs, 
Mallards, and Montages</a>.
Please note that several of the AWL operators in the Online Loom 
are a bit changed from the descriptions in those references,
and several new ones have been added.
Full details are availabe
in the <a href="AWLReference" target="_blank">AWL Reference</a>.
</p>
<p>
The Online Loom was written from scratch in standard Javascript,
with just a bit of jQuery.
I used the 
<a href="http://getbootstrap.com/" target="_blank">Bootstrap 3.3</a>
framework to help make responsive pages,
and the 
<a href="https://github.com/dropbox/dropbox-js" target="_blank">dropbox.js</a>
API for reading and writing to Dropbox.
</p>

<div style="margin-bottom:50px;"></div>
			</div> <!-- column 10 -->
		</div> <!-- row -->
	</div> <!-- container -->

</body>
</html>

